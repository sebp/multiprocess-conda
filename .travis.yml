# The language in this case has no bearing - we are going to be making use of conda.
language: generic

os: osx

# Set BINSTAR_TOKEN
env:
    global:
        secure: "T+vF+gGlX8iJObJ9l9aFh1XgaWIEDKJCtScP1p4/BhQQzffCcrV8feZeNxlSjAXZVJX+NQnr9+Yu+9dof+2RiMGnqUpWmKUSLa8ADhOgo/lhtAozhyBwy37kDc355wgG9gMgzGxZMyVUg+3aQppwtJRUOTa4BYfKlPXZziFZyPUP6QDp/Nh+wvPR9J/DDnB0Nlj133gHmYiThPVRpYG9USKFTnvf7R9f/eFkQoo2eORyVsqYY2NCV83GECiLCXdu8zQVlWnjT2/shVKgRqXAaWtWeeqGfzRQTFvREIBKPfc1dMsfaWPdOSz5iS4N8WG8wA3txf6FPXFTLfGlnzP/aVbnbt/BxSQntKlXpLvAzc99+kb3fpszXVluLcKA7IB9LCq2QsjqHKOljIC+2kkG/Sz1y9i07hxwX4G3ljBTTcQRT15ubarNKiyw+5jkT7arWCKSDZliRGCrTTgGpouAwDupKRjzOpf5EJuJavrIW8VEwIhRiffnVsQ/GXg7SXr6OqV0JWjD7KpB++gG6iAgAdDBDQ2eoETJNw/qn3cIREasEz3tTuVVbmUYCFpPbvKRq/D1mvWDRp7biXUZwW0aSslmpWaN62UB2brQ3R8N6UxFrOddmiVg8hnqwkh3hubypLeuXWthvuLy0sEnRggn33VzHMhZ4XCxp5YTvFec+Zw="

before_install:
    # Remove homebrew.
    - |
      echo ""
      echo "Removing homebrew from Travis CI to avoid conflicts."
      curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/uninstall > ~/uninstall_homebrew
      chmod +x ~/uninstall_homebrew
      ~/uninstall_homebrew -fq
      rm ~/uninstall_homebrew

install:
    # Install Miniconda.
    - ./install_miniconda.sh

script:
    - source ~/miniconda/bin/activate root
    - conda build ./recipe
    # from https://github.com/conda-forge/conda-forge-build-setup-feedstock/blob/master/recipe/upload_or_check_non_existence.py
    - ./upload_or_check_non_existence ./recipe sebp --channel=main
